
-- This script handles adding ClusterIDs to all tables which currently have GUIDs as primary keys.
-- The primary key will remain as the GUID but the clustered index will be this new identity column
-- The aim here is to help SQL server with fragmentation and to help with our player caching performance issues.


-- Add the ClusterID column to all of the tables with a uniqueridentifier (GUID) primary key
ALTER TABLE dbo.Area ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.AreaWalkmesh ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.Backgrounds ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.BankItem ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.BugReport ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.ChatLog ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.ClientLogEvent ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.DatabaseVersion ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.DataPackage ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.DiscordChatQueue ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.DMAction ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.Error ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.GrowingPlant ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.Message ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCBase ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCBasePermission ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCBaseStructure ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCBaseStructureItem ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCBaseStructurePermission ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCCooldown ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCCraftedBlueprint ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCCustomEffect ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCImpoundedItem ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCKeyItem ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCMapPin ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCMapProgression ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCMarketListing ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCObjectVisibility ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCOutfit ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCOverflowItem ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCPerk ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCPerkRefund ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCQuestItemProgress ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCQuestKillTargetProgress ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCQuestStatus ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCRegionalFame ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCSearchSite ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCSearchSiteItem ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCSkill ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.PCSkillPool ADD ClusterID INT IDENTITY NOT NULL
ALTER TABLE dbo.Player ADD ClusterID INT IDENTITY NOT NULL

-- Simple constraint drops:

ALTER TABLE dbo.AreaWalkmesh DROP CONSTRAINT PK__AreaWalk__3214EC27EA63F1F3 ALTER TABLE dbo.AreaWalkmesh ADD CONSTRAINT PK__AreaWalk__3214EC27EA63F1F3 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.Backgrounds DROP CONSTRAINT PK__Backgrou__3214EC276D377700 ALTER TABLE dbo.Backgrounds ADD CONSTRAINT PK__Backgrou__3214EC276D377700 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.BankItem DROP CONSTRAINT PK__BankItem__3214EC275A3A2DB4 ALTER TABLE dbo.BankItem ADD CONSTRAINT PK__BankItem__3214EC275A3A2DB4 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.BugReport DROP CONSTRAINT PK__BugRepor__3214EC27F3E9B54E ALTER TABLE dbo.BugReport ADD CONSTRAINT PK__BugRepor__3214EC27F3E9B54E PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.ChatLog DROP CONSTRAINT PK__ChatLog__454604C4BBAF0C10 ALTER TABLE dbo.ChatLog ADD CONSTRAINT PK__ChatLog__454604C4BBAF0C10 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.ClientLogEvent DROP CONSTRAINT PK_ClientLogEvent_ClientLogEventID ALTER TABLE dbo.ClientLogEvent ADD CONSTRAINT PK_ClientLogEvent_ClientLogEventID PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.DatabaseVersion DROP CONSTRAINT PK__Database__3214EC2779AE4B51 ALTER TABLE dbo.DatabaseVersion ADD CONSTRAINT PK__Database__3214EC2779AE4B51 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.DataPackage DROP CONSTRAINT PK__DataPack__3214EC27CEB99341 ALTER TABLE dbo.DataPackage ADD CONSTRAINT PK__DataPack__3214EC27CEB99341 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.DiscordChatQueue DROP CONSTRAINT PK__DiscordC__3214EC27D414AE20 ALTER TABLE dbo.DiscordChatQueue ADD CONSTRAINT PK__DiscordC__3214EC27D414AE20 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.DMAction DROP CONSTRAINT PK__DMAction__3214EC27CB2BB88D ALTER TABLE dbo.DMAction ADD CONSTRAINT PK__DMAction__3214EC27CB2BB88D PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.Error DROP CONSTRAINT PK__Error__3214EC27894FE627 ALTER TABLE dbo.Error ADD CONSTRAINT PK__Error__3214EC27894FE627 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.GrowingPlant DROP CONSTRAINT PK__GrowingP__807B119175152584 ALTER TABLE dbo.GrowingPlant ADD CONSTRAINT PK__GrowingP__807B119175152584 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.Message DROP CONSTRAINT PK__Message__3214EC2744B74F26 ALTER TABLE dbo.Message ADD CONSTRAINT PK__Message__3214EC2744B74F26 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCBasePermission DROP CONSTRAINT PK__PCBasePe__3214EC27CBDF68E7 ALTER TABLE dbo.PCBasePermission ADD CONSTRAINT PK__PCBasePe__3214EC27CBDF68E7 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCBaseStructureItem DROP CONSTRAINT PK__PCBaseSt__3214EC27BC034627 ALTER TABLE dbo.PCBaseStructureItem ADD CONSTRAINT PK__PCBaseSt__3214EC27BC034627 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCBaseStructurePermission DROP CONSTRAINT PK__PCBaseSt__3214EC2792CE3656 ALTER TABLE dbo.PCBaseStructurePermission ADD CONSTRAINT PK__PCBaseSt__3214EC2792CE3656 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCCooldown DROP CONSTRAINT PK__PCCooldo__61BCE64547547BE9 ALTER TABLE dbo.PCCooldown ADD CONSTRAINT PK__PCCooldo__61BCE64547547BE9 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCCraftedBlueprint DROP CONSTRAINT PK__PCCrafte__3214EC276BE96701 ALTER TABLE dbo.PCCraftedBlueprint ADD CONSTRAINT PK__PCCrafte__3214EC276BE96701 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCCustomEffect DROP CONSTRAINT PK__PCCustom__40F2132E1A5F30A2 ALTER TABLE dbo.PCCustomEffect ADD CONSTRAINT PK__PCCustom__40F2132E1A5F30A2 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCImpoundedItem DROP CONSTRAINT PK__PCImpoun__3214EC27CB8A90C0 ALTER TABLE dbo.PCImpoundedItem ADD CONSTRAINT PK__PCImpoun__3214EC27CB8A90C0 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCKeyItem DROP CONSTRAINT PK__PCKeyIte__36A246562715831F ALTER TABLE dbo.PCKeyItem ADD CONSTRAINT PK__PCKeyIte__36A246562715831F PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCMapPin DROP CONSTRAINT PK__PCMapPin__3214EC27B16600FE ALTER TABLE dbo.PCMapPin ADD CONSTRAINT PK__PCMapPin__3214EC27B16600FE PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCMapProgression DROP CONSTRAINT PK__PCMapPro__3214EC27C86C8D06 ALTER TABLE dbo.PCMapProgression ADD CONSTRAINT PK__PCMapPro__3214EC27C86C8D06 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCMarketListing DROP CONSTRAINT PK__PCMarket__3214EC272E848B52 ALTER TABLE dbo.PCMarketListing ADD CONSTRAINT PK__PCMarket__3214EC272E848B52 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCObjectVisibility DROP CONSTRAINT PK__PCObject__3214EC27ED5BDBF2 ALTER TABLE dbo.PCObjectVisibility ADD CONSTRAINT PK__PCObject__3214EC27ED5BDBF2 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCOutfit DROP CONSTRAINT PK__PCOutfit__4A4E74A8B41DD37A ALTER TABLE dbo.PCOutfit ADD CONSTRAINT PK__PCOutfit__4A4E74A8B41DD37A PRIMARY KEY NONCLUSTERED (PlayerID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCOverflowItem DROP CONSTRAINT PK__PCOverfl__F923885539F635E2 ALTER TABLE dbo.PCOverflowItem ADD CONSTRAINT PK__PCOverfl__F923885539F635E2 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCPerk DROP CONSTRAINT PK__PCPerk__0BA6BCB6B49FBD5D ALTER TABLE dbo.PCPerk ADD CONSTRAINT PK__PCPerk__0BA6BCB6B49FBD5D PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCPerkRefund DROP CONSTRAINT PK__PCPerkRe__3214EC272CBA17C4 ALTER TABLE dbo.PCPerkRefund ADD CONSTRAINT PK__PCPerkRe__3214EC272CBA17C4 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCQuestItemProgress DROP CONSTRAINT PK__PCQuestI__3214EC27A92B69DD ALTER TABLE dbo.PCQuestItemProgress ADD CONSTRAINT PK__PCQuestI__3214EC27A92B69DD PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCRegionalFame DROP CONSTRAINT PK_PCRegionalFame_PCRegionalFameID ALTER TABLE dbo.PCRegionalFame ADD CONSTRAINT PK_PCRegionalFame_PCRegionalFameID PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCSearchSite DROP CONSTRAINT PK__PCSearch__B988F45255B968F1 ALTER TABLE dbo.PCSearchSite ADD CONSTRAINT PK__PCSearch__B988F45255B968F1 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCSearchSiteItem DROP CONSTRAINT PK__PCSearch__001EF3E36436B4F3 ALTER TABLE dbo.PCSearchSiteItem ADD CONSTRAINT PK__PCSearch__001EF3E36436B4F3 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCSkill DROP CONSTRAINT PK__PCSkill__F00838A44ECEB5BD ALTER TABLE dbo.PCSkill ADD CONSTRAINT PK__PCSkill__F00838A44ECEB5BD PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
ALTER TABLE dbo.PCSkillPool DROP CONSTRAINT PK__PCSkillP__3214EC270F867847 ALTER TABLE dbo.PCSkillPool ADD CONSTRAINT PK__PCSkillP__3214EC270F867847 PRIMARY KEY NONCLUSTERED (ID) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]


-- Complex drops:


-- Area Table
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.AreaWalkmesh
	DROP CONSTRAINT FK_AreaWalkmesh_AreaID
GO
ALTER TABLE dbo.Area
	DROP CONSTRAINT PK__Area__3214EC27D140AB70
GO
ALTER TABLE dbo.Area ADD CONSTRAINT
	PK__Area__3214EC27D140AB70 PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.Area SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.AreaWalkmesh
	DROP CONSTRAINT PK__AreaWalk__3214EC27EA63F1F3
GO
ALTER TABLE dbo.AreaWalkmesh ADD CONSTRAINT
	PK__AreaWalk__3214EC27F740B883 PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.AreaWalkmesh ADD CONSTRAINT
	FK_AreaWalkmesh_AreaID FOREIGN KEY
	(
	AreaID
	) REFERENCES dbo.Area
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.AreaWalkmesh SET (LOCK_ESCALATION = TABLE)
GO
COMMIT

-- PCBase Table
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBaseStructure
	DROP CONSTRAINT FK_PCBaseStructure_PCBaseID
GO
ALTER TABLE dbo.Player
	DROP CONSTRAINT FK_Player_PrimaryResidencePCBaseID
GO
ALTER TABLE dbo.PCBasePermission
	DROP CONSTRAINT FK_PCBasePermission_PCBaseID
GO
ALTER TABLE dbo.PCBase
	DROP CONSTRAINT PK__PCBase__3214EC27967FE422
GO
ALTER TABLE dbo.PCBase ADD CONSTRAINT
	PK__PCBase__3214EC27967FE422 PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.PCBase SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBasePermission ADD CONSTRAINT
	FK_PCBasePermission_PCBaseID FOREIGN KEY
	(
	PCBaseID
	) REFERENCES dbo.PCBase
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBasePermission SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.Player ADD CONSTRAINT
	FK_Player_PrimaryResidencePCBaseID FOREIGN KEY
	(
	PrimaryResidencePCBaseID
	) REFERENCES dbo.PCBase
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Player SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBaseStructure ADD CONSTRAINT
	FK_PCBaseStructure_PCBaseID FOREIGN KEY
	(
	PCBaseID
	) REFERENCES dbo.PCBase
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBaseStructure SET (LOCK_ESCALATION = TABLE)
GO
COMMIT

-- PCBaseStructure Table
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBaseStructure
	DROP CONSTRAINT FK_PCBaseStructure_ParentPCBaseStructureID
GO
ALTER TABLE dbo.Player
	DROP CONSTRAINT FK_Player_PrimaryResidencePCBaseStructureID
GO
ALTER TABLE dbo.PCBaseStructureItem
	DROP CONSTRAINT FK_PCBaseStructureItem_PCBaseStructureID
GO
ALTER TABLE dbo.PCBaseStructurePermission
	DROP CONSTRAINT FK_PCBaseStructurePermissions_PCBaseStructureID
GO
ALTER TABLE dbo.PCBaseStructure
	DROP CONSTRAINT PK__PCBaseSt__3214EC278A17DD69
GO
ALTER TABLE dbo.PCBaseStructure ADD CONSTRAINT
	PK__PCBaseSt__3214EC278A17DD69 PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.PCBaseStructure ADD CONSTRAINT
	FK_PCBaseStructure_ParentPCBaseStructureID FOREIGN KEY
	(
	ParentPCBaseStructureID
	) REFERENCES dbo.PCBaseStructure
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBaseStructure SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBaseStructurePermission ADD CONSTRAINT
	FK_PCBaseStructurePermissions_PCBaseStructureID FOREIGN KEY
	(
	PCBaseStructureID
	) REFERENCES dbo.PCBaseStructure
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBaseStructurePermission SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBaseStructureItem ADD CONSTRAINT
	FK_PCBaseStructureItem_PCBaseStructureID FOREIGN KEY
	(
	PCBaseStructureID
	) REFERENCES dbo.PCBaseStructure
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBaseStructureItem SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.Player ADD CONSTRAINT
	FK_Player_PrimaryResidencePCBaseStructureID FOREIGN KEY
	(
	PrimaryResidencePCBaseStructureID
	) REFERENCES dbo.PCBaseStructure
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Player SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
-- PCQuestKillTargetProgress Table
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestKillTargetProgress
	DROP CONSTRAINT PK_PCQuestKillTargetProgress_PCQuestKillTargetProgressID
GO
ALTER TABLE dbo.PCQuestKillTargetProgress ADD CONSTRAINT
	PK_PCQuestKillTargetProgress_PCQuestKillTargetProgressID PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.PCQuestKillTargetProgress SET (LOCK_ESCALATION = TABLE)
GO
COMMIT

-- PCQuestStatus Table
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestItemProgress
	DROP CONSTRAINT FK_PCQuestItemProgress_PCQuesttatusID
GO
ALTER TABLE dbo.PCQuestKillTargetProgress
	DROP CONSTRAINT FK_PCQuestKillTargetProgress_PCQuesttatusID
GO
ALTER TABLE dbo.PCQuestStatus
	DROP CONSTRAINT PK_PCQuesttatus_PCQuesttatusID
GO
ALTER TABLE dbo.PCQuestStatus ADD CONSTRAINT
	PK_PCQuesttatus_PCQuesttatusID PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.PCQuestStatus SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestKillTargetProgress ADD CONSTRAINT
	FK_PCQuestKillTargetProgress_PCQuesttatusID FOREIGN KEY
	(
	PCQuestStatusID
	) REFERENCES dbo.PCQuestStatus
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestKillTargetProgress SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestItemProgress ADD CONSTRAINT
	FK_PCQuestItemProgress_PCQuesttatusID FOREIGN KEY
	(
	PCQuestStatusID
	) REFERENCES dbo.PCQuestStatus
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestItemProgress SET (LOCK_ESCALATION = TABLE)
GO
COMMIT


-- Player Table
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCMapPin
	DROP CONSTRAINT FK_PCMapPin_PlayerID
GO
ALTER TABLE dbo.PCMapProgression
	DROP CONSTRAINT FK_PCMapProgression_PlayerID
GO
ALTER TABLE dbo.PCObjectVisibility
	DROP CONSTRAINT FK_PCObjectVisibility_PlayerID
GO
ALTER TABLE dbo.PCOverflowItem
	DROP CONSTRAINT fk_PCOverflowItem_PlayerID
GO
ALTER TABLE dbo.PCPerk
	DROP CONSTRAINT fk_PCPerk_PlayerID
GO
ALTER TABLE dbo.PCPerkRefund
	DROP CONSTRAINT FK_PCPerkRefund_PlayerID
GO
ALTER TABLE dbo.PCQuestItemProgress
	DROP CONSTRAINT FK_PCQuestItemProgress_PlayerID
GO
ALTER TABLE dbo.PCQuestKillTargetProgress
	DROP CONSTRAINT FK_PCQuestKillTargetProgress_PlayerID
GO
ALTER TABLE dbo.PCQuestStatus
	DROP CONSTRAINT FK_PCQuesttatus_PlayerID
GO
ALTER TABLE dbo.PCRegionalFame
	DROP CONSTRAINT FK_PCRegionalFame_PlayerID
GO
ALTER TABLE dbo.PCSearchSite
	DROP CONSTRAINT fk_PCSearchSite_PlayerID
GO
ALTER TABLE dbo.PCSearchSiteItem
	DROP CONSTRAINT fk_PCSearchSiteItem_PlayerID
GO
ALTER TABLE dbo.PCSkill
	DROP CONSTRAINT FK_PCSkill_PlayerID
GO
ALTER TABLE dbo.PCMarketListing
	DROP CONSTRAINT FK_PCMarketListing_PlayerID
GO
ALTER TABLE dbo.PCMarketListing
	DROP CONSTRAINT FK_PCMarketListing_BuyerPlayerID
GO
ALTER TABLE dbo.Area
	DROP CONSTRAINT FK_Area_NortheastOwner
GO
ALTER TABLE dbo.Area
	DROP CONSTRAINT FK_Area_NorthwestOwner
GO
ALTER TABLE dbo.Area
	DROP CONSTRAINT FK_Area_SoutheastOwner
GO
ALTER TABLE dbo.Area
	DROP CONSTRAINT FK_Area_SouthwestOwner
GO
ALTER TABLE dbo.BankItem
	DROP CONSTRAINT FK_BankItem_PlayerID
GO
ALTER TABLE dbo.BugReport
	DROP CONSTRAINT FK_BugReport_SenderPlayerID
GO
ALTER TABLE dbo.ChatLog
	DROP CONSTRAINT fk_ChatLog_ReceiverPlayerID
GO
ALTER TABLE dbo.PCSkillPool
	DROP CONSTRAINT FK_PCSkillPool_PlayerID
GO
ALTER TABLE dbo.ChatLog
	DROP CONSTRAINT fk_ChatLog_SenderPlayerID
GO
ALTER TABLE dbo.PCOutfit
	DROP CONSTRAINT fk_PCOutfit_PlayerID
GO
ALTER TABLE dbo.ClientLogEvent
	DROP CONSTRAINT FK_ClientLogEvent_PlayerID
GO
ALTER TABLE dbo.Message
	DROP CONSTRAINT FK_Message_PlayerID
GO
ALTER TABLE dbo.PCBase
	DROP CONSTRAINT FK_PCBase_PlayerID
GO
ALTER TABLE dbo.PCBasePermission
	DROP CONSTRAINT FK_PCBasePermission_PlayerID
GO
ALTER TABLE dbo.PCBaseStructurePermission
	DROP CONSTRAINT FK_PCBaseStructurePermissions_PlayerID
GO
ALTER TABLE dbo.PCCooldown
	DROP CONSTRAINT fk_PCCooldown_PlayerID
GO
ALTER TABLE dbo.PCCraftedBlueprint
	DROP CONSTRAINT FK_PCCraftedBlueprint_PlayerID
GO
ALTER TABLE dbo.PCCustomEffect
	DROP CONSTRAINT fk_PCCustomEffect_PlayerID
GO
ALTER TABLE dbo.PCImpoundedItem
	DROP CONSTRAINT FK_PCItemImpound_PlayerID
GO
ALTER TABLE dbo.PCKeyItem
	DROP CONSTRAINT fk_PCKeyItem_PlayerID
GO
ALTER TABLE dbo.Player
	DROP CONSTRAINT PK__PlayerCh__4A4E74A8046BDEBE
GO
ALTER TABLE dbo.Player ADD CONSTRAINT
	PK__PlayerCh__4A4E74A8046BDEBE PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.Player SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCKeyItem ADD CONSTRAINT
	fk_PCKeyItem_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCKeyItem SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCImpoundedItem ADD CONSTRAINT
	FK_PCItemImpound_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCImpoundedItem SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCCustomEffect ADD CONSTRAINT
	fk_PCCustomEffect_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCCustomEffect SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCCraftedBlueprint ADD CONSTRAINT
	FK_PCCraftedBlueprint_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCCraftedBlueprint SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCCooldown ADD CONSTRAINT
	fk_PCCooldown_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCCooldown SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBaseStructurePermission ADD CONSTRAINT
	FK_PCBaseStructurePermissions_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBaseStructurePermission SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBasePermission ADD CONSTRAINT
	FK_PCBasePermission_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBasePermission SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCBase ADD CONSTRAINT
	FK_PCBase_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCBase SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.Message ADD CONSTRAINT
	FK_Message_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Message SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.ClientLogEvent ADD CONSTRAINT
	FK_ClientLogEvent_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.ClientLogEvent SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCOutfit ADD CONSTRAINT
	fk_PCOutfit_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCOutfit SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCSkillPool ADD CONSTRAINT
	FK_PCSkillPool_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCSkillPool SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.ChatLog ADD CONSTRAINT
	fk_ChatLog_ReceiverPlayerID FOREIGN KEY
	(
	ReceiverPlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.ChatLog ADD CONSTRAINT
	fk_ChatLog_SenderPlayerID FOREIGN KEY
	(
	SenderPlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.ChatLog SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.BugReport ADD CONSTRAINT
	FK_BugReport_SenderPlayerID FOREIGN KEY
	(
	SenderPlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.BugReport SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.BankItem ADD CONSTRAINT
	FK_BankItem_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.BankItem SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.Area ADD CONSTRAINT
	FK_Area_NortheastOwner FOREIGN KEY
	(
	NortheastOwner
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Area ADD CONSTRAINT
	FK_Area_NorthwestOwner FOREIGN KEY
	(
	NorthwestOwner
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Area ADD CONSTRAINT
	FK_Area_SoutheastOwner FOREIGN KEY
	(
	SoutheastOwner
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Area ADD CONSTRAINT
	FK_Area_SouthwestOwner FOREIGN KEY
	(
	SouthwestOwner
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.Area SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCMarketListing ADD CONSTRAINT
	FK_PCMarketListing_PlayerID FOREIGN KEY
	(
	SellerPlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCMarketListing ADD CONSTRAINT
	FK_PCMarketListing_BuyerPlayerID FOREIGN KEY
	(
	BuyerPlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCMarketListing SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCSkill ADD CONSTRAINT
	FK_PCSkill_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCSkill SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCSearchSiteItem ADD CONSTRAINT
	fk_PCSearchSiteItem_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCSearchSiteItem SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCSearchSite ADD CONSTRAINT
	fk_PCSearchSite_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCSearchSite SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCRegionalFame ADD CONSTRAINT
	FK_PCRegionalFame_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCRegionalFame SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestItemProgress
	DROP CONSTRAINT FK_PCQuestItemProgress_PCQuesttatusID
GO
ALTER TABLE dbo.PCQuestKillTargetProgress
	DROP CONSTRAINT FK_PCQuestKillTargetProgress_PCQuesttatusID
GO
ALTER TABLE dbo.PCQuestStatus
	DROP CONSTRAINT PK_PCQuesttatus_PCQuesttatusID
GO
ALTER TABLE dbo.PCQuestStatus ADD CONSTRAINT
	PK_PCQuesttatus_PCQuesttatusID PRIMARY KEY NONCLUSTERED 
	(
	ID
	) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
ALTER TABLE dbo.PCQuestStatus ADD CONSTRAINT
	FK_PCQuesttatus_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestStatus SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestKillTargetProgress ADD CONSTRAINT
	FK_PCQuestKillTargetProgress_PCQuesttatusID FOREIGN KEY
	(
	PCQuestStatusID
	) REFERENCES dbo.PCQuestStatus
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestKillTargetProgress ADD CONSTRAINT
	FK_PCQuestKillTargetProgress_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestKillTargetProgress SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCQuestItemProgress ADD CONSTRAINT
	FK_PCQuestItemProgress_PCQuesttatusID FOREIGN KEY
	(
	PCQuestStatusID
	) REFERENCES dbo.PCQuestStatus
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestItemProgress ADD CONSTRAINT
	FK_PCQuestItemProgress_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCQuestItemProgress SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCPerkRefund ADD CONSTRAINT
	FK_PCPerkRefund_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCPerkRefund SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCPerk ADD CONSTRAINT
	fk_PCPerk_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCPerk SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCOverflowItem ADD CONSTRAINT
	fk_PCOverflowItem_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCOverflowItem SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCObjectVisibility ADD CONSTRAINT
	FK_PCObjectVisibility_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCObjectVisibility SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCMapProgression ADD CONSTRAINT
	FK_PCMapProgression_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCMapProgression SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE dbo.PCMapPin ADD CONSTRAINT
	FK_PCMapPin_PlayerID FOREIGN KEY
	(
	PlayerID
	) REFERENCES dbo.Player
	(
	ID
	) ON UPDATE  NO ACTION 
	 ON DELETE  NO ACTION 
	
GO
ALTER TABLE dbo.PCMapPin SET (LOCK_ESCALATION = TABLE)
GO
COMMIT

-- Now create the clustered index on the ClusterID column in these tables
CREATE UNIQUE CLUSTERED INDEX CIX_Area_ID ON dbo.Area(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_AreaWalkmesh_ID ON dbo.AreaWalkmesh(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_Backgrounds_ID ON dbo.Backgrounds(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_BankItem_ID ON dbo.BankItem(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_BugReport_ID ON dbo.BugReport(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_ChatLog_ID ON dbo.ChatLog(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_ClientLogEvent_ID ON dbo.ClientLogEvent(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_DatabaseVersion_ID ON dbo.DatabaseVersion(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_DataPackage_ID ON dbo.DataPackage(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_DiscordChatQueue_ID ON dbo.DiscordChatQueue(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_DMAction_ID ON dbo.DMAction(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_Error_ID ON dbo.Error(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_GrowingPlant_ID ON dbo.GrowingPlant(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_Message_ID ON dbo.Message(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCBase_ID ON dbo.PCBase(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCBasePermission_ID ON dbo.PCBasePermission(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCBaseStructure_ID ON dbo.PCBaseStructure(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCBaseStructureItem_ID ON dbo.PCBaseStructureItem(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCBaseStructurePermission_ID ON dbo.PCBaseStructurePermission(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCCooldown_ID ON dbo.PCCooldown(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCCraftedBlueprint_ID ON dbo.PCCraftedBlueprint(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCCustomEffect_ID ON dbo.PCCustomEffect(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCImpoundedItem_ID ON dbo.PCImpoundedItem(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCKeyItem_ID ON dbo.PCKeyItem(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCMapPin_ID ON dbo.PCMapPin(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCMapProgression_ID ON dbo.PCMapProgression(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCMarketListing_ID ON dbo.PCMarketListing(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCObjectVisibility_ID ON dbo.PCObjectVisibility(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCOutfit_PlayerID ON dbo.PCOutfit(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCOverflowItem_ID ON dbo.PCOverflowItem(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCPerk_ID ON dbo.PCPerk(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCPerkRefund_ID ON dbo.PCPerkRefund(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCQuestItemProgress_ID ON dbo.PCQuestItemProgress(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCQuestKillTargetProgress_ID ON dbo.PCQuestKillTargetProgress(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCQuestStatus_ID ON dbo.PCQuestStatus(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCRegionalFame_ID ON dbo.PCRegionalFame(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCSearchSite_ID ON dbo.PCSearchSite(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCSearchSiteItem_ID ON dbo.PCSearchSiteItem(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCSkill_ID ON dbo.PCSkill(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_PCSkillPool_ID ON dbo.PCSkillPool(ClusterID)
CREATE UNIQUE CLUSTERED INDEX CIX_Player_ID ON dbo.Player(ClusterID)

GO

Exec sp_msforeachtable 'SET QUOTED_IDENTIFIER ON; ALTER INDEX ALL ON ? REORGANIZE'


